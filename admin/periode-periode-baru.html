<!DOCTYPE html>
<html lang="id">

<head>
  <title>SERASI - Periode : Periode Baru</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Main CSS-->
  <link rel="stylesheet" type="text/css" href="/css/main.css">
  <!-- Font-icon css-->
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>

<body class="app sidebar-mini">
  <!-- Navbar-->
  <header class="app-header"><a class="app-header__logo" href="index.html">SERASI</a>
    <!-- Sidebar toggle button--><a class="app-sidebar__toggle" href="#" data-toggle="sidebar"
      aria-label="Hide Sidebar"></a>
    <!-- Navbar Right Menu-->
    <ul class="app-nav">
      <!--Notification Menu-->
      <li class="dropdown"><a class="app-nav__item" href="#" data-bs-toggle="dropdown"
          aria-label="Show notifications"><i class="bi bi-bell fs-5"></i></a>
        <ul class="app-notification dropdown-menu dropdown-menu-right">
          <li class="app-notification__title">Anda mendapatkan 1 pesan</li>
          <li>
            <div class="app-notification__content">
              <a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><i
                    class="bi bi-envelope fs-4 text-primary"></i></span>
                <div>
                  <p class="app-notification__message">Ada 3 Klaim masuk</p>
                  <p class="app-notification__meta">12 min lalu</p>
                </div>
              </a>
            </div>
          </li>
          <li class="app-notification__footer"><a href="#">Lihat semua notifikasi</a></li>
        </ul>
      </li>
      <!-- User Menu-->
      <li class="dropdown"><a class="app-nav__item" href="#" data-bs-toggle="dropdown" aria-label="Open Profile Menu"><i
            class="bi bi-person fs-4"></i></a>
        <ul class="dropdown-menu settings-menu dropdown-menu-right">
          <li><a class="dropdown-item" href="page-login.html"><i class="bi bi-box-arrow-right me-2 fs-5"></i> Logout</a>
          </li>
        </ul>
      </li>
    </ul>
  </header>
  <!-- Sidebar menu-->
  <div class="app-sidebar__overlay" data-toggle="sidebar"></div>
  <aside class="app-sidebar">
    <div class="app-sidebar__user">
      <img class="app-sidebar__user-avatar" src="https://randomuser.me/api/portraits/men/1.jpg" alt="User Image">
      <div>
        <p class="app-sidebar__user-name">John Doe</p>
        <p class="app-sidebar__user-designation">Pengelola</p>
      </div>
    </div>
    <ul class="app-menu">
      <li>
        <a class="app-menu__item" href="dashboard.html">
          <i class="app-menu__icon bi bi-speedometer"></i>
          <span class="app-menu__label">Dashboard</span>
        </a>
      </li>
      <li class="treeview is-expanded">
        <a class="app-menu__item" href="#" data-toggle="treeview">
          <i class="app-menu__icon bi bi-calendar"></i>
          <span class="app-menu__label">Periode</span>
          <i class="treeview-indicator bi bi-chevron-right"></i>
        </a>
        <ul class="treeview-menu">
          <li>
            <a class="treeview-item" href="periode-daftar-periode.html">
              <i class="icon bi bi-file-fill"></i> Daftar Periode
            </a>
          </li>
          <li>
            <a class="treeview-item active" href="periode-periode-baru.html">
              <i class="icon bi bi-file-fill"></i> Periode Baru
            </a>
          </li>
          <li>
            <a class="treeview-item" href="periode-periode-aktif.html">
              <i class="icon bi bi-file-fill"></i> Periode Aktif
            </a>
          </li>
        </ul>
      </li>
      <li class="treeview">
        <a class="app-menu__item" href="#" data-toggle="treeview">
          <i class="app-menu__icon bi bi-mortarboard"></i>
          <span class="app-menu__label">Akademik</span>
          <i class="treeview-indicator bi bi-chevron-right"></i>
        </a>
        <ul class="treeview-menu">
          <li>
            <a class="treeview-item" href="akademik-kurikulum.html">
              <i class="icon bi bi-file-fill"></i> Kurikulum
            </a>
          </li>
          <li>
            <a class="treeview-item" href="akademik-program-studi.html">
              <i class="icon bi bi-file-fill"></i> Program Studi
            </a>
          </li>
          <li>
            <a class="treeview-item" href="akademik-mata-kuliah.html">
              <i class="icon bi bi-file-fill"></i> Mata Kuliah
            </a>
          </li>
          <li>
            <a class="treeview-item" href="akademik-capaian.html">
              <i class="icon bi bi-file-fill"></i> Capaian
            </a>
          </li>
        </ul>
      </li>
      <li class="treeview">
        <a class="app-menu__item" href="#" data-toggle="treeview">
          <i class="app-menu__icon bi bi-people"></i>
          <span class="app-menu__label">Pengguna</span>
          <i class="treeview-indicator bi bi-chevron-right"></i>
        </a>
        <ul class="treeview-menu">
          <li>
            <a class="treeview-item" href="pengguna-pengelola.html">
              <i class="icon bi bi-file-fill"></i> Pengelola
            </a>
          </li>
          <li>
            <a class="treeview-item" href="pengguna-penilai.html">
              <i class="icon bi bi-file-fill"></i> Penilai
            </a>
          </li>
          <li>
            <a class="treeview-item" href="pengguna-aplikan.html">
              <i class="icon bi bi-file-fill"></i> Aplikan
            </a>
          </li>
        </ul>
      </li>
      <li class="treeview">
        <a class="app-menu__item" href="#" data-toggle="treeview">
          <i class="app-menu__icon bi bi-award"></i>
          <span class="app-menu__label">Rekognisi</span>
          <i class="treeview-indicator bi bi-chevron-right"></i>
        </a>
        <ul class="treeview-menu">
          <li>
            <a class="treeview-item" href="rekognisi-klaim-aplikan.html">
              <i class="icon bi bi-file-fill"></i> Klaim Aplikan
            </a>
          </li>
          <li>
            <a class="treeview-item" href="rekognisi-penilaian.html">
              <i class="icon bi bi-file-fill"></i> Penilaian
            </a>
          </li>
          <li>
            <a class="treeview-item" href="rekognisi-laporan.html">
              <i class="icon bi bi-file-fill"></i> Laporan
            </a>
          </li>
        </ul>
      </li>
      <li class="treeview">
        <a class="app-menu__item" href="#" data-toggle="treeview">
          <i class="app-menu__icon bi bi-clock-history"></i>
          <span class="app-menu__label">History</span>
          <i class="treeview-indicator bi bi-chevron-right"></i>
        </a>
        <ul class="treeview-menu">
          <li>
            <a class="treeview-item" href="history-aplikan.html">
              <i class="icon bi bi-file-fill"></i> Aplikan
            </a>
          </li>
          <li>
            <a class="treeview-item" href="history-penilai.html">
              <i class="icon bi bi-file-fill"></i> Penilai
            </a>
          </li>
          <li>
            <a class="treeview-item" href="history-program-studi.html">
              <i class="icon bi bi-file-fill"></i> Program Studi
            </a>
          </li>
        </ul>
      </li>
      <li>
        <a class="app-menu__item" href="setting.html">
          <i class="app-menu__icon bi bi-gear"></i>
          <span class="app-menu__label">Setting</span>
        </a>
      </li>
    </ul>
  </aside>
  <main class="app-content">
    <div class="app-title">
      <div>
        <h1><i class="bi bi-calendar"></i> Periode</h1>
        <p>Sistem Rekognisi dan Asesmen Terintegrasi</p>
      </div>
      <ul class="app-breadcrumb breadcrumb">
        <li class="breadcrumb-item"><i class="bi bi-house-door fs-6"></i></li>
        <li class="breadcrumb-item">Periode</li>
        <li class="breadcrumb-item active">Periode Baru</li>
      </ul>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="tile">
          <form id="periodeForm" method="post" action="#" class="form-horizontal">
            <div class="mb-3 row">
              <label for="tahunAjaran" class="form-label col-md-3">Nama Periode</label>
              <div class="col-md-4 col-lg-3">
                <select name="tahunAjaran" id="tahunAjaran" class="form-select" title="Pilih Tahun Ajaran" required>
                  <option value="2026">2026/2027</option>
                  <option value="2025">2025/2026</option>
                  <option value="2024">2024/2025</option>
                </select>
              </div>
              <div class="col-md-3 col-lg-2">
                <select name="semester" id="semester" class="form-select" title="Pilih Semester" required>
                  <option value="ganjil">Ganjil</option>
                  <option value="genap">Genap</option>
                </select>
              </div>
            </div>
            <div class="mb-3 row">
              <label class="form-label col-md-3">Program Studi</label>
              <div class="col-md-9">
                <div class="accordion" id="accordionFaculty">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="facultyOne">
                      <button class="accordion-button px-3 py-2 collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFacultyOne" aria-expanded="true" aria-controls="collapseFacultyOne">
                        <div class="d-flex justify-content-between align-items-center w-100">
                          <div>Fakultas Informatika</div>
                          <div class="me-3"><span class="prodiSelected">0</span>/<span class="prodiTotal">0</span></div>
                        </div>
                      </button>
                    </h2>
                    <div id="collapseFacultyOne" class="accordion-collapse collapse" aria-labelledby="facultyOne" data-bs-parent="#accordionFaculty">
                      <div class="accordion-body">
                        <div class="form-check">
                          <input type="checkbox" name="prodi[]" id="prodi11" value="kode_prodi_11" class="form-check-input">
                          <label for="prodi11" class="form-check-label">Program Studi Teknik Informatika</label>
                          <span class="fw-semibold fst-italic text-primary ms-2">(Baik Sekali)</span>
                        </div>
                        <div class="form-check">
                          <input type="checkbox" name="prodi[]" id="prodi12" value="kode_prodi_12" class="form-check-input">
                          <label for="prodi12" class="form-check-label">Program Studi Sistem Informasi</label>
                          <span class="fw-semibold fst-italic text-primary ms-2">(Unggul)</span>
                        </div>
                        <div class="form-check">
                          <input type="checkbox" name="prodi[]" id="prodi13" value="kode_prodi_13" class="form-check-input">
                          <label for="prodi13" class="form-check-label">Program Studi Teknologi Informasi</label>
                          <span class="fw-semibold fst-italic text-primary ms-2">(Baik)</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="facultyTwo">
                      <button class="accordion-button px-3 py-2 collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFacultyTwo" aria-expanded="false" aria-controls="collapseFacultyTwo">
                        <div class="d-flex justify-content-between align-items-center w-100">
                          <div>Fakultas Teknik</div>
                          <div class="me-3"><span class="prodiSelected">0</span>/<span class="prodiTotal">0</span></div>
                        </div>
                      </button>
                    </h2>
                    <div id="collapseFacultyTwo" class="accordion-collapse collapse" aria-labelledby="facultyTwo" data-bs-parent="#accordionFaculty">
                      <div class="accordion-body">
                        <div class="form-check">
                          <input type="checkbox" name="prodi[]" id="prodi21" value="kode_prodi_21" class="form-check-input">
                          <label for="prodi21" class="form-check-label">Program Studi Teknik Sipil</label>
                          <span class="fw-semibold fst-italic text-primary ms-2">(Baik Sekali)</span>
                        </div>
                        <div class="form-check">
                          <input type="checkbox" name="prodi[]" id="prodi22" value="kode_prodi_22" class="form-check-input">
                          <label for="prodi22" class="form-check-label">Program Studi Teknik Mesin</label>
                          <span class="fw-semibold fst-italic text-primary ms-2">(Baik Sekali)</span>
                        </div>
                        <div class="form-check">
                          <input type="checkbox" name="prodi[]" id="prodi23" value="kode_prodi_23" class="form-check-input">
                          <label for="prodi23" class="form-check-label">Program Studi Teknik Elektro</label>
                          <span class="fw-semibold fst-italic text-primary ms-2">(Baik)</span>
                        </div>
                        <div class="form-check">
                          <input type="checkbox" name="prodi[]" id="prodi24" value="kode_prodi_24" class="form-check-input">
                          <label for="prodi24" class="form-check-label">Program Studi Teknik Kimia</label>
                          <span class="fw-semibold fst-italic text-primary ms-2">(Unggul)</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="facultyThree">
                      <button class="accordion-button px-3 py-2 collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFacultyThree" aria-expanded="false" aria-controls="collapseFacultyThree">
                        <div class="d-flex justify-content-between align-items-center w-100">
                          <div>Fakultas Budaya</div>
                          <div class="me-3"><span class="prodiSelected">0</span>/<span class="prodiTotal">0</span></div>
                        </div>
                      </button>
                    </h2>
                    <div id="collapseFacultyThree" class="accordion-collapse collapse" aria-labelledby="facultyThree" data-bs-parent="#accordionFaculty">
                      <div class="accordion-body">
                        <div class="form-check">
                          <input type="checkbox" name="prodi[]" id="prodi31" value="kode_prodi_31" class="form-check-input">
                          <label for="prodi31" class="form-check-label">Program Studi Sastra Indonesia</label>
                          <span class="fw-semibold fst-italic text-primary ms-2">(Baik)</span>
                        </div>
                        <div class="form-check">
                          <input type="checkbox" name="prodi[]" id="prodi32" value="kode_prodi_32" class="form-check-input">
                          <label for="prodi32" class="form-check-label">Program Studi Sastra Inggris</label>
                          <span class="fw-semibold fst-italic text-primary ms-2">(Baik Sekali)</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="facultyFour">
                      <button class="accordion-button px-3 py-2 collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFacultyFour" aria-expanded="false" aria-controls="collapseFacultyFour">
                        <div class="d-flex justify-content-between align-items-center w-100">
                          <div>Fakultas Ekonomi</div>
                          <div class="me-3"><span class="prodiSelected">0</span>/<span class="prodiTotal">0</span></div>
                        </div>
                      </button>
                    </h2>
                    <div id="collapseFacultyFour" class="accordion-collapse collapse" aria-labelledby="facultyFour" data-bs-parent="#accordionFaculty">
                      <div class="accordion-body">
                        <div class="form-check">
                          <input type="checkbox" name="prodi[]" id="prodi41" value="kode_prodi_41" class="form-check-input">
                          <label for="prodi41" class="form-check-label">Program Studi Manajemen</label>
                          <span class="fw-semibold fst-italic text-primary ms-2">(Baik)</span>
                        </div>
                        <div class="form-check">
                          <input type="checkbox" name="prodi[]" id="prodi42" value="kode_prodi_42" class="form-check-input">
                          <label for="prodi42" class="form-check-label">Program Studi Akuntansi</label>
                          <span class="fw-semibold fst-italic text-primary ms-2">(Baik Sekali)</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="mb-3 row">
              <label class="form-label col-md-3" for="jumlahPenilai">Jumlah Penilai per Aplikan</label>
              <div class="col-md-3">
                <select name="jumlahPenilai" id="jumlahPenilai" class="form-select" required>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3" selected>3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                </select>
              </div>
            </div>
            <div class="mb-2 row">
              <label class="form-label col-md-3" for="tingkatKeahlian">Tingkat Keahlian</label>
              <div class="col-md-3">
                <select name="tingkatKeahlian" id="tingkatKeahlian" class="form-select" required>
                  <option value="3" selected>3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                  <option value="11">11</option>
                  <option value="12">12</option>
                </select>
              </div>
            </div>
            <div class="mb-2 row">
              <div class="col-md-9 offset-md-3" id="levelContainer">
                <div class="row">
                  <div class="col-md-4 mb-2">
                    <div class="input-group">
                      <input type="text" class="form-control" name="level[]" placeholder="Level 0">
                      <span class="input-group-text" id="level-value0">0</span>
                      <input type="hidden" name="levelValue[]" value="0">
                    </div>
                  </div>
                  <div class="col-md-4 mb-2">
                    <div class="input-group">
                      <input type="text" class="form-control" name="level[]" placeholder="Level 1">
                      <span class="input-group-text" id="level-value1">50</span>
                      <input type="hidden" name="levelValue[]" value="50">
                    </div>
                  </div>
                  <div class="col-md-4 mb-2">
                    <div class="input-group">
                      <input type="text" class="form-control" name="level[]" placeholder="Level 2">
                      <span class="input-group-text" id="level-value2">75</span>
                      <input type="hidden" name="levelValue[]" value="75">
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="mb-3 row">
              <label class="form-label col-md-3" for="metodeKlaim">Metode Klaim</label>
              <div class="col-md-4">
                <select name="metodeKlaim" id="metodeKlaim" class="form-select" required>
                  <option value="1">Capaian Pembelajaran Mata Kuliah</option>
                  <option value="2" selected>Mata Kuliah</option>
                  <option value="3">Kelompok Mata Kuliah</option>
                </select>
              </div>
            </div>
            <div class="mb-3 row">
              <label class="form-label col-md-3" for="skRektor">SK Rektor</label>
              <div class="col-md-9">
                <input type="file" name="skRektor" id="skRektor" class="form-control" accept=".pdf,.doc,.docx" required>
                <small class="form-text text-muted fst-italic">Unggah SK Rektor dalam format PDF</small>
              </div>
            </div>
            <div class="mb-3 row">
              <label for="" class="form-label col-md-3">Penilai</label>
              <div class="col-md-9">
                <a href="periode-daftar-penilai.html" class="btn btn-primary">Daftar Penilai >></a>
              </div>
            </div>
            <div class="mb-3 row">
              <div class="col-md-9 offset-md-3">
                <button type="submit" class="btn btn-primary">Simpan Periode Baru</button>
                <button type="button" class="btn btn-success" disabled>Aktifkan Periode</button>
              </div>
            </div>
          </form>
        </div>
      </div>

<!-- Jika Periode Aktif belum selesai -->
      <div>
        <div class="tile page-error with-header">
          <h1 class="text-danger"><i class="bi bi-exclamation-circle"></i> Periode aktif masih berjalan</h1>
          <p>Silakan selesaikan periode aktif sebelum membuat periode baru.</p>
        </div>
      </div>
    </div>
  </main>
  <!-- Essential javascripts for application to work-->
  <script src="/js/jquery-3.7.0.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/main.js"></script>
  <script>
  // Fungsi untuk menghitung jumlah program studi yang dipilih
  function updateProdiCount() {
    $('.accordion-item').each(function() {
      var $body = $(this).find('.accordion-body');
      if ($body.length === 0) return;
      var $checkboxes = $body.find('input[type="checkbox"]');
      var total = $checkboxes.length;
      var checked = $checkboxes.filter(':checked').length;
      var $header = $(this).find('.accordion-header');
      $header.find('.prodiSelected').text(checked);
      $header.find('.prodiTotal').text(total);
    });
  }

  // Fungsi update level sesuai jumlah tingkat keahlian
  function updateLevelInputs() {
    var tingkat = parseInt($('#tingkatKeahlian').val(), 10);
    var $container = $('#levelContainer .row');
    $container.empty();
    var step = Math.floor(100 / (tingkat - 1));
    for (var i = 0; i < tingkat; i++) {
      var value = i === tingkat - 1 ? 100 : i * step;
      if (value > 100) value = 100;
      var html = `
        <div class="col-md-3 mb-2">
          <div class="input-group">
            <input type="text" class="form-control" name="level[]" placeholder="Level ${i}" required>
            <span class="input-group-text" id="level-value${i}">${value}</span>
            <input type="hidden" name="levelValue[]" value="${value}">
          </div>
        </div>
      `;
      $container.append(html);
    }
  }

  $(document).ready(function() {
    updateProdiCount();
    $('.accordion-body input[type="checkbox"]').on('change', updateProdiCount);

    // Inisialisasi level saat load dan saat tingkatKeahlian berubah
    updateLevelInputs();
    $('#tingkatKeahlian').on('change', updateLevelInputs);
  });
</script>
</body>

</html>